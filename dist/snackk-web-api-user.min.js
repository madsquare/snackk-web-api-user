!function(e,r){"function"==typeof define?define(["server","lodash"],r):"object"==typeof exports?module.exports=r():e.user=r()}(this,function(){var e,r,n;return function(t){function s(e,r){var n,t,s,i,u,o,a,c,l,f,p=r&&r.split("/"),d=_.map,v=d&&d["*"]||{};if(e&&"."===e.charAt(0)&&r){for(p=p.slice(0,p.length-1),e=p.concat(e.split("/")),c=0;f=e[c];c++)if("."===f)e.splice(c,1),c-=1;else if(".."===f){if(1===c&&(".."===e[2]||".."===e[0]))return!0;c>0&&(e.splice(c-1,2),c-=2)}e=e.join("/")}if((p||v)&&d){for(n=e.split("/"),c=n.length;c>0;c-=1){if(t=n.slice(0,c).join("/"),p)for(l=p.length;l>0;l-=1)if(s=d[p.slice(0,l).join("/")],s&&(s=s[t])){i=s,u=c;break}if(i)break;!o&&v&&v[t]&&(o=v[t],a=c)}!i&&o&&(i=o,u=a),i&&(n.splice(0,u,i),e=n.join("/"))}return e}function i(e,r){return function(){return p.apply(t,m.call(arguments,0).concat([e,r]))}}function u(e){return function(r){return s(r,e)}}function o(e){return function(r){d[e]=r}}function a(e){if(v.hasOwnProperty(e)){var r=v[e];delete v[e],g[e]=!0,f.apply(t,r)}if(!d.hasOwnProperty(e))throw new Error("No "+e);return d[e]}function c(e,r){var n,t,i=e.indexOf("!");return-1!==i?(n=s(e.slice(0,i),r),e=e.slice(i+1),t=a(n),e=t&&t.normalize?t.normalize(e,u(r)):s(e,r)):e=s(e,r),{f:n?n+"!"+e:e,n:e,p:t}}function l(e){return function(){return _&&_.config&&_.config[e]||{}}}var f,p,d={},v={},_={},g={},m=[].slice;f=function(e,r,n,s){var u,f,p,_,m,h,y=[];if(s=s||e,"function"==typeof n){for(r=!r.length&&n.length?["require","exports","module"]:r,h=0;h<r.length;h++)if(m=c(r[h],s),p=m.f,"require"===p)y[h]=i(e);else if("exports"===p)y[h]=d[e]={},u=!0;else if("module"===p)f=y[h]={id:e,uri:"",exports:d[e],config:l(e)};else if(d.hasOwnProperty(p)||v.hasOwnProperty(p))y[h]=a(p);else if(m.p)m.p.load(m.n,i(s,!0),o(p),{}),y[h]=d[p];else if(!g[p])throw new Error(e+" missing "+p);_=n.apply(d[e],y),e&&(f&&f.exports!==t&&f.exports!==d[e]?d[e]=f.exports:_===t&&u||(d[e]=_))}else e&&(d[e]=n)},e=r=p=function(e,r,n,s){return"string"==typeof e?a(c(e,r).f):(e.splice||(_=e,r.splice?(e=r,r=n,n=null):e=t),r=r||function(){},s?f(t,e,r,n):setTimeout(function(){f(t,e,r,n)},15),p)},p.config=function(e){return _=e,p},n=function(e,r,n){r.splice||(n=r,r=[]),v[e]=[e,r,n]},n.amd={jQuery:!0}}(),n("../almond",function(){}),function(){n("user",["server"],function(e){var r,n,t,s;return s=null,n={DUPLICATED:"error_duplicated",INVALID:"error_invalid",UN_KNOWN:"error_unknown"},t={success:function(e){return function(e){return callback&&callback.success?callback.success(e):void 0}}(this),error:function(e){return function(e){return callback&&callback.error?callback.error(e):void 0}}(this),complete:function(){return callback&&callback.complete?callback.complete():void 0}},r={setUser:function(e){return s=e},registUser:function(r,n,t){return t||(t={}),e.request(e.TAG.user.user,_.assign({data:_.assign({user:r},t)},{type:"POST"},n))},addProvider:function(r,n,t){var i;return i=e.TAG.user.provider.replace(":us_no",s.us_no).replace(":provider",r),e.request(i,_.aasign({type:"POST",data:{token:n}},t))},loadMe:function(r,n){return n||(n={}),e.request(e.TAG.user.user,_.assign({data:n},r))},loadDefaultPicture:function(r){var n;return n=e.TAG.user.profileDefault.replace(":us_no",s.us_no),e.request(n,r)},updateUser:function(r,n,t){var i;return s?(t||(t={}),i=e.TAG.user.aUser.replace(":us_no",s.us_no),e.request(i,_.assign({type:"PUT",data:_.assign({user:r},t)},n))):void console.log("updateUser] user object is empty.")},updateProfile:function(r,n){var t;return t=e.TAG.user.profile.replace(":us_no",s.us_no),e.request(t,_.assign({fileInput:r,dataType:"iframe json"},n))},updatePassword:function(r,n,t,i){var u,o,a,c;return r?(o={passwd:r},u={nonce:{isPasswdEdit:1}}):(o={},u={}),i||(i={}),c=_.assign({new_passwd:newPassWd},o),a=e.TAG.user.aUser.replace(":us_no",s.us_no),e.request(a,_.aasign({type:"PUT",data:_.assign({user:c},u,i)},t))},deleteUser:function(r){var n;return s?(n=e.TAG.user.aUser.replace(":us_no",s.us_no),e.request(n,_.assign({type:"DELETE"},r))):void console.log("deleteUser] user object is empty.")},deleteProvider:function(r,n){var t;return t=e.TAG.user.provider.replace(":us_no",s.us_no).replace(":provider",r),e.request(t,_.assign({type:"DELETE"},n))},deletePicture:function(r){var n;return n=e.TAG.user.profile.replace(":us_no",s.us_no),e.request(n,_.assign({type:"DELETE"},r))},sendEmail:function(r){var n;return n=e.TAG.user.emailPost,e.request(n,r)},validateEmail:function(e,r){var t,s;return r&&e?(e.match(/^(([a-zA-Z]|[0-9])|([-]|[_]|[.]))+[@](([a-zA-Z0-9])|([-])){2,63}[.](([a-zA-Z0-9]){2,63})+$/gi)||r("ERROR",n.INVALID),s&&s.abort(),t={filter:{email:e}},s=this.loadUser(t,{success:function(e){return function(e){return r("ERROR",n.DUPLICATED)}}(this),error:function(e){return function(e){return 404===e.code?r("SUCCESS"):r("ERROR",n.UN_KNOWN)}}(this),complete:function(e){return function(){return s=null}}(this)})):void console.error("validateEmail] email or callback is not defined.")}}})}.call(this),n("server",function(e){return window.require("server")}),r("user")});
//# sourceMappingURL=snackk-web-api-user.min.js.map