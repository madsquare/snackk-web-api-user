!function(e,r){"function"==typeof define?define(["server"],r):"object"==typeof exports?module.exports=r():e.request=r()}(this,function(){var e,r,n;return function(t){function s(e,r){var n,t,s,i,u,o,a,c,l,f,p=r&&r.split("/"),d=v.map,_=d&&d["*"]||{};if(e&&"."===e.charAt(0)&&r){for(p=p.slice(0,p.length-1),e=p.concat(e.split("/")),c=0;f=e[c];c++)if("."===f)e.splice(c,1),c-=1;else if(".."===f){if(1===c&&(".."===e[2]||".."===e[0]))return!0;c>0&&(e.splice(c-1,2),c-=2)}e=e.join("/")}if((p||_)&&d){for(n=e.split("/"),c=n.length;c>0;c-=1){if(t=n.slice(0,c).join("/"),p)for(l=p.length;l>0;l-=1)if(s=d[p.slice(0,l).join("/")],s&&(s=s[t])){i=s,u=c;break}if(i)break;!o&&_&&_[t]&&(o=_[t],a=c)}!i&&o&&(i=o,u=a),i&&(n.splice(0,u,i),e=n.join("/"))}return e}function i(e,r){return function(){return p.apply(t,m.call(arguments,0).concat([e,r]))}}function u(e){return function(r){return s(r,e)}}function o(e){return function(r){d[e]=r}}function a(e){if(_.hasOwnProperty(e)){var r=_[e];delete _[e],g[e]=!0,f.apply(t,r)}if(!d.hasOwnProperty(e))throw new Error("No "+e);return d[e]}function c(e,r){var n,t,i=e.indexOf("!");return-1!==i?(n=s(e.slice(0,i),r),e=e.slice(i+1),t=a(n),e=t&&t.normalize?t.normalize(e,u(r)):s(e,r)):e=s(e,r),{f:n?n+"!"+e:e,n:e,p:t}}function l(e){return function(){return v&&v.config&&v.config[e]||{}}}var f,p,d={},_={},v={},g={},m=[].slice;f=function(e,r,n,s){var u,f,p,v,m,h,y=[];if(s=s||e,"function"==typeof n){for(r=!r.length&&n.length?["require","exports","module"]:r,h=0;h<r.length;h++)if(m=c(r[h],s),p=m.f,"require"===p)y[h]=i(e);else if("exports"===p)y[h]=d[e]={},u=!0;else if("module"===p)f=y[h]={id:e,uri:"",exports:d[e],config:l(e)};else if(d.hasOwnProperty(p)||_.hasOwnProperty(p))y[h]=a(p);else if(m.p)m.p.load(m.n,i(s,!0),o(p),{}),y[h]=d[p];else if(!g[p])throw new Error(e+" missing "+p);v=n.apply(d[e],y),e&&(f&&f.exports!==t&&f.exports!==d[e]?d[e]=f.exports:v===t&&u||(d[e]=v))}else e&&(d[e]=n)},e=r=p=function(e,r,n,s){return"string"==typeof e?a(c(e,r).f):(e.splice||(v=e,r.splice?(e=r,r=n,n=null):e=t),r=r||function(){},s?f(t,e,r,n):setTimeout(function(){f(t,e,r,n)},15),p)},p.config=function(e){return v=e,p},n=function(e,r,n){r.splice||(n=r,r=[]),_[e]=[e,r,n]},n.amd={jQuery:!0}}(),n("../almond",function(){}),function(){n("user",["server"],function(e){var r,n,t,s;return s=null,n={DUPLICATED:"error_duplicated",INVALID:"error_invalid",UN_KNOWN:"error_unknown"},t={success:function(e){return function(e){return callback&&callback.success?callback.success(e):void 0}}(this),error:function(e){return function(e){return callback&&callback.error?callback.error(e):void 0}}(this),complete:function(){return callback&&callback.complete?callback.complete():void 0}},r={setUser:function(e){return s=e},registUser:function(r,n,s){return s||(s={}),e.request(e.TAG.user.user,_.assign({data:_.assign({user:r},s)},{type:"POST"},t))},addProvider:function(r,n,i){var u;return u=e.TAG.user.provider.replace(":us_no",s.us_no).replace(":provider",r),e.request(u,_.aasign({type:"POST",data:{token:n}},t))},loadMe:function(r,n){return n||(n={}),e.request(e.TAG.user.user,_.assign({data:n},t))},loadDefaultPicture:function(r){var n;return n=e.TAG.user.profileDefault.replace(":us_no",s.us_no),e.request(n,t)},updateUser:function(r,n,i){var u;return s?(i||(i={}),u=e.TAG.user.aUser.replace(":us_no",s.us_no),e.request(u,_.assign({type:"PUT",data:_.assign({user:r},i)},t))):void console.log("updateUser] user object is empty.")},updateProfile:function(r,n){var i;return i=e.TAG.user.profile.replace(":us_no",s.us_no),e.request(i,_.assign({fileInput:r,dataType:"iframe json"},t))},updatePassword:function(r,n,i,u){var o,a,c,l;return r?(a={passwd:r},o={nonce:{isPasswdEdit:1}}):(a={},o={}),u||(u={}),l=_.assign({new_passwd:newPassWd},a),c=e.TAG.user.aUser.replace(":us_no",s.us_no),e.request(c,_.aasign({type:"PUT",data:_.assign({user:l},o,u)},t))},deleteUser:function(r){var n;return s?(n=e.TAG.user.aUser.replace(":us_no",s.us_no),e.request(n,_.assign({type:"DELETE"},t))):void console.log("deleteUser] user object is empty.")},deleteProvider:function(r,n){var i;return i=e.TAG.user.provider.replace(":us_no",s.us_no).replace(":provider",r),e.request(i,_.assign({type:"DELETE"},t))},deletePicture:function(r){var n;return n=e.TAG.user.profile.replace(":us_no",s.us_no),e.request(n,_.assign({type:"DELETE"},t))},sendEmail:function(r){var n;return n=e.TAG.user.emailPost,e.request(n,t)},validateEmail:function(e,r){var t,s;return r&&e?(e.match(/^(([a-zA-Z]|[0-9])|([-]|[_]|[.]))+[@](([a-zA-Z0-9])|([-])){2,63}[.](([a-zA-Z0-9]){2,63})+$/gi)||r("ERROR",n.INVALID),s&&s.abort(),t={filter:{email:e}},s=this.loadUser(t,{success:function(e){return function(e){return r("ERROR",n.DUPLICATED)}}(this),error:function(e){return function(e){return 404===e.code?r("SUCCESS"):r("ERROR",n.UN_KNOWN)}}(this),complete:function(e){return function(){return s=null}}(this)})):void console.error("validateEmail] email or callback is not defined.")}}})}.call(this),r("user")});
//# sourceMappingURL=snackk-web-api-user.min.js.map