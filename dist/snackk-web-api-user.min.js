!function(e,r){"function"==typeof define?define(["lodash"],r):"object"==typeof exports?module.exports=r():"undefined"==typeof e.snackkModule&&(e.snackkModule={user:r()})}(this,function(){var e,r,s;return function(i){function n(e,r){var s,i,n,t,o,u,l,a,c,d,f=r&&r.split("/"),v=h.map,p=v&&v["*"]||{};if(e&&"."===e.charAt(0)&&r){for(f=f.slice(0,f.length-1),e=f.concat(e.split("/")),a=0;d=e[a];a++)if("."===d)e.splice(a,1),a-=1;else if(".."===d){if(1===a&&(".."===e[2]||".."===e[0]))return!0;a>0&&(e.splice(a-1,2),a-=2)}e=e.join("/")}if((f||p)&&v){for(s=e.split("/"),a=s.length;a>0;a-=1){if(i=s.slice(0,a).join("/"),f)for(c=f.length;c>0;c-=1)if(n=v[f.slice(0,c).join("/")],n&&(n=n[i])){t=n,o=a;break}if(t)break;!u&&p&&p[i]&&(u=p[i],l=a)}!t&&u&&(t=u,o=l),t&&(s.splice(0,o,t),e=s.join("/"))}return e}function t(e,r){return function(){return f.apply(i,m.call(arguments,0).concat([e,r]))}}function o(e){return function(r){return n(r,e)}}function u(e){return function(r){v[e]=r}}function l(e){if(p.hasOwnProperty(e)){var r=p[e];delete p[e],_[e]=!0,d.apply(i,r)}if(!v.hasOwnProperty(e))throw new Error("No "+e);return v[e]}function a(e,r){var s,i,t=e.indexOf("!");return-1!==t?(s=n(e.slice(0,t),r),e=e.slice(t+1),i=l(s),e=i&&i.normalize?i.normalize(e,o(r)):n(e,r)):e=n(e,r),{f:s?s+"!"+e:e,n:e,p:i}}function c(e){return function(){return h&&h.config&&h.config[e]||{}}}var d,f,v={},p={},h={},_={},m=[].slice;d=function(e,r,s,n){var o,d,f,h,m,g,y=[];if(n=n||e,"function"==typeof s){for(r=!r.length&&s.length?["require","exports","module"]:r,g=0;g<r.length;g++)if(m=a(r[g],n),f=m.f,"require"===f)y[g]=t(e);else if("exports"===f)y[g]=v[e]={},o=!0;else if("module"===f)d=y[g]={id:e,uri:"",exports:v[e],config:c(e)};else if(v.hasOwnProperty(f)||p.hasOwnProperty(f))y[g]=l(f);else if(m.p)m.p.load(m.n,t(n,!0),u(f),{}),y[g]=v[f];else if(!_[f])throw new Error(e+" missing "+f);h=s.apply(v[e],y),e&&(d&&d.exports!==i&&d.exports!==v[e]?v[e]=d.exports:h===i&&o||(v[e]=h))}else e&&(v[e]=s)},e=r=f=function(e,r,s,n){return"string"==typeof e?l(a(e,r).f):(e.splice||(h=e,r.splice?(e=r,r=s,s=null):e=i),r=r||function(){},n?d(i,e,r,s):setTimeout(function(){d(i,e,r,s)},15),f)},f.config=function(e){return h=e,f},s=function(e,r,s){r.splice||(s=r,r=[]),p[e]=[e,r,s]},s.amd={jQuery:!0}}(),s("../almond",function(){}),function(){s("user",[],function(){var e,r,s;return s=null,r={DUPLICATED:"error_duplicated",INVALID:"error_invalid",UN_KNOWN:"error_unknown"},e={server:null,init:function(e){return this.server=e},setUser:function(e){return this.server?s=e:void console.error("user-module] not initialized server.")},registUser:function(e,r,s){return this.server?(s||(s={}),this.server.request(this.server.TAG.user.get,_.assign({data:_.assign({user:e},s)},{type:"POST"},r))):void console.error("user-module] not initialized server.")},addProvider:function(e,r,i){var n;return this.server?(n=this.server.TAG.user.provider.replace(":us_no",s.us_no).replace(":provider",e),this.server.request(n,_.aasign({type:"POST",data:{token:r}},i))):void console.error("user-module] not initialized server.")},loadMe:function(e,r){return this.server?(r||(r={}),this.server.request(this.server.TAG.user.get,_.assign({data:r},e))):void console.error("user-module] not initialized server.")},loadDefaultProfile:function(e){var r;return this.server?(r=this.server.TAG.user.profileDefault.replace(":us_no",s.us_no),this.server.request(r,e)):void console.error("user-module] not initialized server.")},updateUser:function(e,r,i){var n;return this.server?s?(i||(i={}),n=this.server.TAG.user.unit.replace(":us_no",s.us_no),this.server.request(n,_.assign({type:"PUT",data:_.assign({user:e},i)},r))):void console.log("updateUser] user object is empty."):void console.error("user-module] not initialized server.")},updateProfile:function(e,r){var i;return this.server?(i=this.server.TAG.user.profile.replace(":us_no",s.us_no),this.server.request(i,_.assign({fileInput:e,dataType:"iframe json"},r))):void console.error("user-module] not initialized server.")},updatePassword:function(e,r,i,n){var t,o,u,l;return this.server?(e?(o={passwd:e},t={nonce:{isPasswdEdit:1}}):(o={},t={}),n||(n={}),l=_.assign({new_passwd:newPassWd},o),u=this.server.TAG.user.unit.replace(":us_no",s.us_no),this.server.request(u,_.aasign({type:"PUT",data:_.assign({user:l},t,n)},i))):void console.error("user-module] not initialized server.")},deleteUser:function(e){var r;return this.server?s?(r=this.server.TAG.user.unit.replace(":us_no",s.us_no),this.server.request(r,_.assign({type:"DELETE"},e))):void console.log("deleteUser] user object is empty."):void console.error("user-module] not initialized server.")},deleteProvider:function(e,r){var i;return this.server?(i=this.server.TAG.user.provider.replace(":us_no",s.us_no).replace(":provider",e),this.server.request(i,_.assign({type:"DELETE"},r))):void console.error("user-module] not initialized server.")},deleteProfile:function(e){var r;return this.server?(r=this.server.TAG.user.profile.replace(":us_no",s.us_no),this.server.request(r,_.assign({type:"DELETE"},e))):void console.error("user-module] not initialized server.")},sendEmail:function(e){var r;return this.server?(r=this.server.TAG.user.emailPost,this.server.request(r,e)):void console.error("user-module] not initialized server.")},validateEmail:function(e,s){var i,n;return this.server?s&&e?(e.match(/^(([a-zA-Z]|[0-9])|([-]|[_]|[.]))+[@](([a-zA-Z0-9])|([-])){2,63}[.](([a-zA-Z0-9]){2,63})+$/gi)||s("ERROR",r.INVALID),n&&n.abort(),i={filter:{email:e}},n=this.loadUser(i,{success:function(e){return function(e){return s("ERROR",r.DUPLICATED)}}(this),error:function(e){return function(e){return 404===e.code?s("SUCCESS"):s("ERROR",r.UN_KNOWN)}}(this),complete:function(e){return function(){return n=null}}(this)})):void console.error("validateEmail] email or callback is not defined."):void console.error("user-module] not initialized server.")}}})}.call(this),r("user")});
//# sourceMappingURL=snackk-web-api-user.min.js.map