!function(e,r){"function"==typeof define?define(["lodash"],r):"object"==typeof exports?module.exports=r():("undefined"==typeof e.snackkModule&&(e.snackkModule={}),e.snackkModule.user=r())}(this,function(){var e,r,s;return function(i){function n(e,r){var s,i,n,t,o,u,l,a,c,d,f=r&&r.split("/"),v=h.map,p=v&&v["*"]||{};if(e&&"."===e.charAt(0)&&r){for(f=f.slice(0,f.length-1),e=f.concat(e.split("/")),a=0;d=e[a];a++)if("."===d)e.splice(a,1),a-=1;else if(".."===d){if(1===a&&(".."===e[2]||".."===e[0]))return!0;a>0&&(e.splice(a-1,2),a-=2)}e=e.join("/")}if((f||p)&&v){for(s=e.split("/"),a=s.length;a>0;a-=1){if(i=s.slice(0,a).join("/"),f)for(c=f.length;c>0;c-=1)if(n=v[f.slice(0,c).join("/")],n&&(n=n[i])){t=n,o=a;break}if(t)break;!u&&p&&p[i]&&(u=p[i],l=a)}!t&&u&&(t=u,o=l),t&&(s.splice(0,o,t),e=s.join("/"))}return e}function t(e,r){return function(){return f.apply(i,g.call(arguments,0).concat([e,r]))}}function o(e){return function(r){return n(r,e)}}function u(e){return function(r){v[e]=r}}function l(e){if(p.hasOwnProperty(e)){var r=p[e];delete p[e],m[e]=!0,d.apply(i,r)}if(!v.hasOwnProperty(e))throw new Error("No "+e);return v[e]}function a(e,r){var s,i,t=e.indexOf("!");return-1!==t?(s=n(e.slice(0,t),r),e=e.slice(t+1),i=l(s),e=i&&i.normalize?i.normalize(e,o(r)):n(e,r)):e=n(e,r),{f:s?s+"!"+e:e,n:e,p:i}}function c(e){return function(){return h&&h.config&&h.config[e]||{}}}var d,f,v={},p={},h={},m={},g=[].slice;d=function(e,r,s,n){var o,d,f,h,g,_,y=[];if(n=n||e,"function"==typeof s){for(r=!r.length&&s.length?["require","exports","module"]:r,_=0;_<r.length;_++)if(g=a(r[_],n),f=g.f,"require"===f)y[_]=t(e);else if("exports"===f)y[_]=v[e]={},o=!0;else if("module"===f)d=y[_]={id:e,uri:"",exports:v[e],config:c(e)};else if(v.hasOwnProperty(f)||p.hasOwnProperty(f))y[_]=l(f);else if(g.p)g.p.load(g.n,t(n,!0),u(f),{}),y[_]=v[f];else if(!m[f])throw new Error(e+" missing "+f);h=s.apply(v[e],y),e&&(d&&d.exports!==i&&d.exports!==v[e]?v[e]=d.exports:h===i&&o||(v[e]=h))}else e&&(v[e]=s)},e=r=f=function(e,r,s,n){return"string"==typeof e?l(a(e,r).f):(e.splice||(h=e,r.splice?(e=r,r=s,s=null):e=i),r=r||function(){},n?d(i,e,r,s):setTimeout(function(){d(i,e,r,s)},15),f)},f.config=function(e){return h=e,f},s=function(e,r,s){r.splice||(s=r,r=[]),p[e]=[e,r,s]},s.amd={jQuery:!0}}(),s("../almond",function(){}),function(){s("user",["lodash"],function(e){var r,s,i,n;return n=null,i="",s={DUPLICATED:"error_duplicated",INVALID:"error_invalid",UN_KNOWN:"error_unknown"},r={server:null,init:function(e){return this.server=e},setUser:function(e){return this.server?n=e:void console.error("user-module] not initialized server.")},registerUser:function(r,s,i){return this.server?(i||(i={}),this.server.request(this.server.TAG.user.get,e.assign({data:e.assign({user:r},i),type:"POST"},s))):void console.error("user-module] not initialized server.")},addProvider:function(r,s,i){var t;return this.server?(t=this.server.TAG.user.provider.replace(":us_no",n.us_no).replace(":provider",r),this.server.request(t,e.assign({type:"POST",data:{token:s}},i))):void console.error("user-module] not initialized server.")},loadMe:function(r,s){return this.server?(s||(s={}),this.server.request(this.server.TAG.user.get,e.assign({data:s},r))):void console.error("user-module] not initialized server.")},loadDefaultProfile:function(e){var r;return this.server?(r=this.server.TAG.user.profileDefault.replace(":us_no",n.us_no),this.server.request(r,e)):void console.error("user-module] not initialized server.")},updateUser:function(r,s,i){var t;return this.server?n?(i||(i={}),t=this.server.TAG.user.unit.replace(":us_no",n.us_no),this.server.request(t,e.assign({type:"PUT",data:e.assign({user:r},i)},s))):void console.log("updateUser] user object is empty."):void console.error("user-module] not initialized server.")},updateProfile:function(r,s){var i;return this.server?(i=this.server.TAG.user.profile.replace(":us_no",n.us_no),this.server.request(i,e.assign({fileInput:r,dataType:"iframe json"},s))):void console.error("user-module] not initialized server.")},updatePassword:function(r,s,i,t){var o,u,l,a;return this.server?(r?(u={passwd:r},o={nonce:{isPasswdEdit:1}}):(u={},o={}),t||(t={}),a=e.assign({new_passwd:newPassWd},u),l=this.server.TAG.user.unit.replace(":us_no",n.us_no),this.server.request(l,e.aasign({type:"PUT",data:e.assign({user:a},o,t)},i))):void console.error("user-module] not initialized server.")},deleteUser:function(r){var s;return this.server?n?(s=this.server.TAG.user.unit.replace(":us_no",n.us_no),this.server.request(s,e.assign({type:"DELETE"},r))):void console.log("deleteUser] user object is empty."):void console.error("user-module] not initialized server.")},deleteProvider:function(r,s){var i;return this.server?(i=this.server.TAG.user.provider.replace(":us_no",n.us_no).replace(":provider",r),this.server.request(i,e.assign({type:"DELETE"},s))):void console.error("user-module] not initialized server.")},deleteProfile:function(r){var s;return this.server?(s=this.server.TAG.user.profile.replace(":us_no",n.us_no),this.server.request(s,e.assign({type:"DELETE"},r))):void console.error("user-module] not initialized server.")},sendEmail:function(e){var r;return this.server?(r=this.server.TAG.user.emailPost,this.server.request(r,e)):void console.error("user-module] not initialized server.")},validateEmail:function(e,r){var i,n;return this.server?r&&e?(e.match(/^(([a-zA-Z]|[0-9])|([-]|[_]|[.]))+[@](([a-zA-Z0-9])|([-])){2,63}[.](([a-zA-Z0-9]){2,63})+$/gi)||r("ERROR",s.INVALID),n&&n.abort(),i={filter:{email:e}},n=this.loadUser(i,{success:function(e){return function(e){return r("ERROR",s.DUPLICATED)}}(this),error:function(e){return function(e){return 404===e.code?r("SUCCESS"):r("ERROR",s.UN_KNOWN)}}(this),complete:function(e){return function(){return n=null}}(this)})):void console.error("validateEmail] email or callback is not defined."):void console.error("user-module] not initialized server.")}}})}.call(this),s("lodash",function(){return _}),r("user")});
//# sourceMappingURL=snackk-web-api-user.min.js.map